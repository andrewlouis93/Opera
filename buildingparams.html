<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <title>Opera</title>
	<!-- JS -->
	<script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
	<script language="javascript" type="text/javascript" src="js/sessvars.js"></script>	
	<script language="javascript" type="text/javascript" src="dragdealer/dragdealer.js"></script>	
	<script language="javascript" type="text/javascript" src="js/bootstrap.js"></script>		
	<script language="javascript" type="text/javascript" src="js/numeric-1.2.6.min.js"></script>
	<script language="javascript" type="text/javascript" src="js/sessvars.js"></script>
	<script language="javascript" type="text/javascript" src="js/sheargen-trial.js"></script>
	<script>	
			
			sessvars.phi_f = [];
			
			//This works!
			function timeoutFunction(){
				//alert("Hello");
			}
	
			setInterval(function(){timeoutFunction()},3000);
			
			function getIndexFromID(string,slider){
				var temp;
				var object = new Object();
				if (slider == "target"){
					object.mode = "target";
				}
				else if (slider == "my-slider"){
					object.mode = "spec";
					temp = string.slice(9);
					temp = parseFloat(temp);
				}
				
				object.index = temp;
				return object;
			}
			
			//CREATE FUNCTION FOR LAST 0 LEVEL THAT WILL EXECUTE AT THE END OF EVERY FOR LOOP.
			function createSlider(slider_id,dragbutton_id,i){
				new Dragdealer(slider_id,{horizontal: true,x:i,animationCallback: function(x, y){
					
					var temp = slider_id.slice(0);
					temp = temp.slice(0,9);
					
					//Doesn't actually getIndexFromID alone.
					var obj = getIndexFromID(slider_id,temp);
					
					if (obj.mode == 'spec'){
						sessvars.phi_f[obj.index] = x.toFixed(2);
					}
					else if (obj.mode == 'target'){
						//Fill this in.
					}
					
					document.getElementById(dragbutton_id).innerHTML = x.toFixed(2);}
					});
			}
			
			function createDivs_specs(){
				var linspace = numeric.linspace(0,1,sessvars.storey_count).reverse();
				for (var count=0; count < parseFloat(sessvars.storey_count); count++){
					var string=	"<br><div id='my-slider"+count+"' class='dragdealer'><div class='red-bar handle'><span id='drag-button"+count+"'>drag me</span></div></div><br>"	/*<br><div id='my-slider"+count+"' class='dragdealer'><div class='red-bar handle'><span id='drag-button"+count+"'>drag me</span></div></div>";*/
					$("#bldg_specs").append(string);
					
					var slider_id ="my-slider"+count;
					var drag_button_id = "drag-button"+count;
					createSlider(slider_id,drag_button_id,linspace[count]);
				}
			}
			
			function createDivs_target(){
				var linspace = numeric.linspace(0,1,sessvars.storey_count).reverse();/**/		
				for (var count=0; count < parseFloat(sessvars.storey_count); count++){
					var string=	"<span><br><div id='target-slider"+count+"' class='dragdealer'><div class='red-bar handle'><span id='target-drag-button"+count+"'>drag me</span></div><input class='floor_mass' type='number' step='any' placeholder='mass'></div><br>";
					$("#bldg_target").append(string);
					
					var slider_id ="target-slider"+count;
					var drag_button_id = "target-drag-button"+count;
					createSlider(slider_id,drag_button_id,linspace[count]);
				}
			}
			
			/*<input class='floor_mass' type='number' step='any' placeholder='mass'><span>*/
			
    		$(document).ready(function() {
				createDivs_specs();
				createDivs_target();
			});
    	</script>
	<!-- CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
	<link rel="stylesheet" href="stylesheet.css" type="text/css" />
	<link rel="stylesheet" href="form_stylesheet_bldgparams.css" type="text/css" />	
	<link href='dragdealer/dragdealer.css' rel='stylesheet' type='text/css'>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Lato:100' rel='stylesheet' type='text/css'>
	<link href='fonts/font-awesome/css/font-awesome.css' rel='stylesheet' type='text/css'>

  </head>

  <body>

    <!-- Part 1: Wrap all page content here -->
    <div id="wrap" style="overflow:hidden;">
      <!-- Begin page content -->
			<span style="margin-top:18px;margin-left:95%;float:right;font-size:47px;opacity:0.7;color:#FF2B32;position:absolute;">
				<a id="navigator"><i class="icon-circle-arrow-right"></i></a>
			</span>
			<div class="container" style="overflow:hidden;">
				<div class="basic_form">
					<span id="seismic_title">
							Building Parameters
					</span>
					<div id="bldg_specs">
						<div class="custom_label">Specification</div><br>
					</div>
					
					<div id="bldg_target">
						<div class="custom_label">Target</div><br>
					</div>
					
					
				</div>
			</div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">University of Toronto &copy; 2013</p>
      </div>
    </div>
  </body>
</html>
