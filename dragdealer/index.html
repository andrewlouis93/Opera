<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Opera</title>
    	<!--<script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>-->
		<style>
			.item {
			  border: 1px solid black;
			  background-color: #ddddff;
			  width: 100px;
			  height: 100px;
			}
				  
			#state1 {
			  left: 100px;
			  top: 100px;
			}
				  
			#state2 {
			  left: 250px;
			  top: 100px;
			}
				  
			#state3 {
			  left: 100px;
			  top: 250px;
			}
			
			#drag-button1{z-index:99;}
			#drag-button2{z-index:99;}
			#drag-button3{z-index:99;}
			
			._jsPlumb_hover{z-index:99;}
		</style>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    	<script language="javascript" type="text/javascript" src="dragdealer.js"></script>
		<script type="text/javascript" src="../js/sessvars.js"></script>	
		<script type="text/javascript" src="jquery.jsPlumb-1.4.1-all.js "></script>
    	<script>
		
			function createSlider(slider_id,dragbutton_id){
				new Dragdealer(slider_id,{horizontal: true,x:Math.random(),animationCallback: function(x, y){
					document.getElementById(dragbutton_id).innerHTML = x.toFixed(2);}});
			}
			
			function NewDiv(){
				for (var count=0; count < parseFloat(sessvars.storey_count); count++){
					var string=	"<br><div id='my-slider"+count+"' class='dragdealer'><div class='red-bar handle'><span id='drag-button"+count+"'>drag me</span></div></div>";
					$("body").append(string);
					
					var slider_id ="my-slider"+count;
					var drag_button_id = "drag-button"+count;
					createSlider(slider_id,drag_button_id);
				}
			}
    		$(document).ready(function() {
  				// Handler for .ready() called.
  				 new Dragdealer('my-slider',
				{
					horizontal: true,
					x:0.3,
					animationCallback: function(x, y)
					{
						document.getElementById("drag-button").innerHTML = x.toFixed(2);
						//alert(x);
					}
				});


  				// Handler for .ready() called.
  				 new Dragdealer('my-slider2',
				{
					horizontal: true,
					x:0.6,
					animationCallback: function(x, y)
					{
						document.getElementById("drag-button2").innerHTML = x.toFixed(2);
						//alert(x);
					}
				});

  				// Handler for .ready() called.
  				 new Dragdealer('my-slider3',
				{
					horizontal: true,
					x:0.7,
					animationCallback: function(x, y)
					{
						document.getElementById("drag-button3").innerHTML = x.toFixed(2);
						//alert(x);
					}
				});
				NewDiv();
			});
			/*
			jsPlumb.ready(function() {

				jsPlumb.connect({ source:"drag-button", target: "drag-button2",
								      paintStyle:{ lineWidth:4, strokeStyle:'rgba(0, 0, 200, 0.5)' },
										anchors:["Center", "Center"],
										connector:"Straight",
										endpoint:[ "Rectangle", { width:1, height:1 }]
								});
				jsPlumb.draggable("drag-button");
				jsPlumb.draggable("drag-button2");
			});
			*/
    	</script>
    	<link href='dragdealer.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
  	<br>
  	<div id="my-slider" class="dragdealer">
		<div class="red-bar handle">
				<span id="drag-button">drag me</span>
		</div>
	</div>
	<br>

 
  </body>
</html>